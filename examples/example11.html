
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Example 11 - The Travel Time Diffusion Coefficient &#8212; dorado 2.2.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example 12 - Unsteady Flow Fields" href="example12.html" />
    <link rel="prev" title="Example 10 - Routing Particles in Parallel" href="example10.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="example-11-the-travel-time-diffusion-coefficient">
<span id="example11"></span><h1>Example 11 - The Travel Time Diffusion Coefficient<a class="headerlink" href="#example-11-the-travel-time-diffusion-coefficient" title="Permalink to this headline">¶</a></h1>
<p>In this example, we will develop a simple straight channel with steady, uniform flow. Then we will use two different travel time diffusion coefficient values (<cite>diff_coeff</cite>) and look at the impact on the particle travel time distributions at a specific location.</p>
<p>Shortened code for the synthetic channel creation will be provided, for the full code refer to the <a class="reference download internal" download="" href="../_downloads/af9b0ed9931f5ea2cea202e2e3f0eecb/traveltime_straight_channel.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">script</span></code></a>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dorado.particle_track</span> <span class="k">as</span> <span class="nn">pt</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">domain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span><span class="p">[:,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[:,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10.0</span>
</pre></div>
</div>
<p>In the 100 x 50 cell domain, we have a straight channel with flow from the top of the domain to the bottom at -10 m/s. Our cell size is 50m, and the particles will be seeded at row 10. We will define a region of interest that extends to row 70, and apply the <a class="reference internal" href="../apiref/particletrack.html#dorado.particle_track.exposure_time" title="dorado.particle_track.exposure_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.exposure_time</span></code></a> function to calculate the travel times of the particles. The region will end at the boundary of row 70. Since the flow velocity is both steady and uniform in this channel, our expected travel time is simply:</p>
<div class="math">
<p><img src="../_images/math/376f1322126363d8ea62f9420bee4823922ddee3.png" alt="\begin{eqnarray}
{\text{Exp. Time} = 59.5 \text{ cells} \times 50 \text{ m/cell} \div 10 \text{ m/s} = 297.5 \text{ seconds}}.
\end{eqnarray}"/></p>
</div><p>With this in mind we will conduct two simulations, both using 500 tracer particles. In the first, we will set the travel time diffusion coefficient (<cite>diff_coeff</cite>) to 0, and in the second we will set it to 1.0 (a significant amount of added diffusivity).</p>
<p>Shortened parameter initialization:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">modelParams</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">depth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="n">v</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Then we will define <cite>diff_coeff</cite>, initialize the Particle class, and do the simulation.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">dc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)):</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="c1"># set diff_coeff</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">if</span> <span class="n">dc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">params</span><span class="o">.</span><span class="n">diff_coeff</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">params</span><span class="o">.</span><span class="n">diff_coeff</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="gp">&gt;&gt;&gt; </span>   <span class="c1"># make particle</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">particle</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">Particles</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span>   <span class="c1"># walk it</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">particle</span><span class="o">.</span><span class="n">generate_particles</span><span class="p">(</span><span class="n">Np_tracer</span><span class="p">,</span> <span class="n">seed_xloc</span><span class="p">,</span> <span class="n">seed_yloc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_iter</span><span class="p">)):</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">walk_data</span> <span class="o">=</span> <span class="n">particle</span><span class="o">.</span><span class="n">run_iteration</span><span class="p">()</span>
</pre></div>
</div>
<p>If we then visualize the two travel time distributions (shown below), we can see the impact of raising the <cite>diff_coeff</cite>. If you’d like to experiment with this scenario, the full example script includes the code for generating the plots shown below.</p>
<img alt="../_images/domain.png" src="../_images/domain.png" />
<img alt="../_images/travtime_distributions.png" src="../_images/travtime_distributions.png" />
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">dorado</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paper/index.html">Paper</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="example01.html">Example 1 - Particles in Steady Flow (ANUGA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="example02.html">Example 2 - Particles in Steady Flow (DeltaRCM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="example03.html">Example 3 - Using the Built-In Animation Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="example04.html">Example 4 - Toggling Steepest Descent</a></li>
<li class="toctree-l2"><a class="reference internal" href="example05.html">Example 5 - Visualizing Particle Travel Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="example06.html">Example 6 - Set Travel Time Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="example07.html">Example 7 - Drawing Particle Travel Paths (DeltaRCM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="example08.html">Example 8 - Drawing Particle Travel Paths (ANUGA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="example09.html">Example 9 - True Random Walk</a></li>
<li class="toctree-l2"><a class="reference internal" href="example10.html">Example 10 - Routing Particles in Parallel</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Example 11 - The Travel Time Diffusion Coefficient</a></li>
<li class="toctree-l2"><a class="reference internal" href="example12.html">Example 12 - Unsteady Flow Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="example13.html">Example 13 - Using Unstructured Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#external-examples">External Examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apiref/index.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/acknowledgments.html">Acknowledgments</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Examples</a><ul>
      <li>Previous: <a href="example10.html" title="previous chapter">Example 10 - Routing Particles in Parallel</a></li>
      <li>Next: <a href="example12.html" title="next chapter">Example 12 - Unsteady Flow Fields</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, J. Hariharan, K. Wright, P. Passalacqua.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/examples/example11.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
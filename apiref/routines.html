<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>dorado.routines &#8212; dorado 2.5.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <script src="../_static/documentation_options.js?v=c0370f68"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dorado.parallel_routing" href="parallelrouting.html" />
    <link rel="prev" title="dorado.lagrangian_walker" href="lagrangianwalker.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-dorado.routines">
<span id="dorado-routines"></span><span id="routines"></span><h1>dorado.routines<a class="headerlink" href="#module-dorado.routines" title="Link to this heading">¶</a></h1>
<p>Higher level methods for routing and visualizing tracer particles.</p>
<p>Project Homepage: <a class="reference external" href="https://github.com/passaH2O/dorado">https://github.com/passaH2O/dorado</a></p>
<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.animate_plots">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">animate_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#animate_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.animate_plots" title="Link to this definition">¶</a></dt>
<dd><p>Animation routine, requires an optional animation writer.</p>
<p>Routine to make mp4 animation of the particle routing from png outputs
of the previous plotting routines.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>start_val<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of first plot to use</p>
</dd>
<dt>end_val<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of last plot to use</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite></span></dt><dd><p>Name of output folder to get results from</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>Saves an mp4 animation to the results folder</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.draw_travel_path">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">draw_travel_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particles_to_follow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'travel_paths.png'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#draw_travel_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.draw_travel_path" title="Link to this definition">¶</a></dt>
<dd><p>Make a plot with the travel path of specified particles drawn out.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>A 2-D grid upon which the particles will be plotted. Examples of
grids that might be nice to use are
<cite>dorado.particle_track.modelParams.depth</cite>,
<cite>dorado.particle_track.modelParams.stage</cite>,
<cite>dorado.particle_track.modelParams.topography</cite>.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Output of <cite>steady_plots</cite>, <cite>unsteady_plots</cite>, <cite>time_plots</cite>, as well
as the <cite>particle_track.run_iteration</cite> method.</p>
</dd>
<dt>particles_to_follow<span class="classifier"><cite>list</cite>, optional</span></dt><dd><p>List of particle numbers for which to draw the travel paths.
Default is <cite>all</cite> particles.</p>
</dd>
<dt>output_file<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to save the output image to.</p>
</dd>
<dt>interval<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Determines how “smooth” each particle trajectory appears by
skipping iterations between successive points on the path.
Default it to show every iteration</p>
</dd>
<dt>plot_legend<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether resulting plot includes a legend of particle IDs.
Default is False</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>Saves a plot of particle travel paths.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.get_state">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#get_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.get_state" title="Link to this definition">¶</a></dt>
<dd><p>Pull walk_data values from a specific iteration.</p>
<p>Routine to return slices of the walk_data dict at a given iteration #.
This function provides a shortcut to ‘smart’ indexing of the dict.
By default returns information on the most recent step</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
<dt>iteration<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Iteration number at which to slice the dictionary. Defaults
to -1, i.e. the most recent step</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>xinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘xinds’][:][iteration]</p>
</dd>
<dt>yinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘yinds’][:][iteration]</p>
</dd>
<dt>times<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of
walk_data[‘travel_times’][:][iteration]</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.get_time_state">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">get_time_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#get_time_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.get_time_state" title="Link to this definition">¶</a></dt>
<dd><p>Pull walk_data values nearest to a specific time.</p>
<p>Routine to return slices of the walk_data dict at a given travel time.
This function provides a shortcut to ‘smart’ indexing of the dict.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
<dt>target_time<span class="classifier"><cite>float</cite></span></dt><dd><p>Travel time at which to slice the dictionary.</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>xinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘xinds’][:][i], where i
represents the index at which travel time is nearest to input.</p>
</dd>
<dt>yinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘yinds’][:][i], where i
represents the index at which travel time is nearest to input.</p>
</dd>
<dt>times<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘travel_times’][:][i],
where i represents the index at which travel time is nearest
to input. Times will differ slightly from input time due to
the nature of the method.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.plot_exposure_time">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">plot_exposure_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exposure_times</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timedelta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#plot_exposure_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.plot_exposure_time" title="Link to this definition">¶</a></dt>
<dd><p>Plot exposure time distribution of particles in a specified region.</p>
<p>Function to plot the exposure time distribution (ETD) of particles to
the specified region. Relies on the output of particle_track.exposure_time</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Output of a previous function call to run_iteration.</p>
</dd>
<dt>exposure_times<span class="classifier"><cite>list</cite></span></dt><dd><p>List [] of floats containing the output of
particle_track.exposure_time</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>timedelta<span class="classifier"><cite>int or float</cite>, optional</span></dt><dd><p>Unit of time for time-axis of ETD plots, specified as time
in seconds (e.g. an input of 60 plots things by minute).</p>
</dd>
<dt>nbins<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Number of bins to use as the time axis for differential ETD.
Using fewer bins smoothes out curves.</p>
</dd>
<dt>save_output<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether or not the output images/data are saved to disk.
Default value is True.</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>If <cite>save_output</cite> is set to True, script saves plots of the cumulative
and differential forms of the ETD as a png and the list of exposure
times as a json (‘human-readable’) text file.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.plot_state">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">plot_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'b'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#plot_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.plot_state" title="Link to this definition">¶</a></dt>
<dd><p>Plot particle positions on an array.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>A 2-D grid upon which the particles will be plotted. Examples of
grids that might be nice to use are
<cite>dorado.particle_track.modelParams.depth</cite>,
<cite>dorado.particle_track.modelParams.stage</cite>,
<cite>dorado.particle_track.modelParams.topography</cite>.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>The dictionary with the particle information. This is the output
from one of the other routines or the
<a class="reference internal" href="particletrack.html#dorado.particle_track.Particles.run_iteration" title="dorado.particle_track.Particles.run_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.Particles.run_iteration()</span></code></a> function.</p>
</dd>
<dt>iteration<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Iteration number at which to plot the particles. Default is -1,
i.e. the most recent step</p>
</dd>
<dt>target_time<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Travel time at which to plot the particles. If specified, iteration
is ignored.</p>
</dd>
<dt>c<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>String to specify the color of the particle marks to draw on the
figure, default is ‘b’ for blue</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ax<span class="classifier"><cite>matplotlib.axes</cite></span></dt><dd><p>A <cite>matplotlib.axes</cite> with the intended plot drawn on it</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.show_nourishment_area">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">show_nourishment_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">visit_freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Reds'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dodgerblue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#show_nourishment_area"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.show_nourishment_area" title="Link to this definition">¶</a></dt>
<dd><p>Plot a smoothed, normalized heatmap of particle visit frequency.</p>
<p>Function will plot the history of particle travel locations in walk_data
as a heatmap overtop the specified grid, using the output of
<a class="reference internal" href="particletrack.html#dorado.particle_track.nourishment_area" title="dorado.particle_track.nourishment_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.nourishment_area()</span></code></a>. Colors indicate number
of instances in which that cell was occupied by a particle.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>visit_freq<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>A 2-D grid of normalized particle visit frequencies, i.e. the
output of the <a class="reference internal" href="particletrack.html#dorado.particle_track.nourishment_area" title="dorado.particle_track.nourishment_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.nourishment_area()</span></code></a>
function</p>
</dd>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite>, optional</span></dt><dd><p>An optional 2-D grid upon which the particles will be plotted.
Examples of grids that might be nice to use are
<cite>dorado.particle_track.modelParams.depth</cite>,
<cite>dorado.particle_track.modelParams.stage</cite>,
<cite>dorado.particle_track.modelParams.topography</cite>.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite>, optional</span></dt><dd><p>The dictionary with the particle information, which is used to
show the seed location. This is the output from one of the other
routines or the
<a class="reference internal" href="particletrack.html#dorado.particle_track.Particles.run_iteration" title="dorado.particle_track.Particles.run_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.Particles.run_iteration()</span></code></a> function.</p>
</dd>
<dt>cmap<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Name of Matplotlib colormap used for the foreground (heatmap).
Default is ‘Reds’</p>
</dd>
<dt>sigma<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Degree of spatial smoothing of the heatmap used in the
dorado.particle_track.nourishment_area() function, only used to
adjust the plot asthetics for low sigma’s</p>
</dd>
<dt>min_alpha<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Minimum alpha value of the heatmap, representing the least
frequented cell locations, default is full transparency</p>
</dd>
<dt>show_seed<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Determines whether resulting plot shows a marker indicating the
(first) seed location. Uses indices of walk_data[:][0][0]. Default
is True, but only if ‘walk_data’ is also provided.</p>
</dd>
<dt>seed_color<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Name of matplotlib color used for the marker seed, if shown.
Default is a light blue to contrast with the ‘Reds’ heatmap.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ax<span class="classifier"><cite>matplotlib.axes</cite></span></dt><dd><p>A <cite>matplotlib.axes</cite> upon which the nourishment area is drawn</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.show_nourishment_time">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">show_nourishment_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean_times</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'magma'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dodgerblue'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#show_nourishment_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.show_nourishment_time" title="Link to this definition">¶</a></dt>
<dd><p>Plot a smoothed heatmap of mean particle visit time.</p>
<p>Function will plot the history of mean particle travel times in walk_data
as a heatmap overtop the specified grid, using the output of
<a class="reference internal" href="particletrack.html#dorado.particle_track.nourishment_time" title="dorado.particle_track.nourishment_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.nourishment_time()</span></code></a>. Colors indicate the mean
length of time particles spent in each cell (potentially after smoothing)</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>mean_times<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>Array of mean occupation times in each cell, i.e. the output of
the <a class="reference internal" href="particletrack.html#dorado.particle_track.nourishment_time" title="dorado.particle_track.nourishment_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.nourishment_time()</span></code></a> function</p>
</dd>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite>, optional</span></dt><dd><p>An optional 2-D grid upon which the particles will be plotted.
Recommended to use <cite>dorado.particle_track.modelParams.topography</cite></p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite>, optional</span></dt><dd><p>The dictionary with the particle information, which is used to
show the seed location. This is the output from one of the other
routines or the
<a class="reference internal" href="particletrack.html#dorado.particle_track.Particles.run_iteration" title="dorado.particle_track.Particles.run_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.Particles.run_iteration()</span></code></a> function.</p>
</dd>
<dt>cmap<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Name of Matplotlib colormap used for the foreground (heatmap).
Default is ‘magma’</p>
</dd>
<dt>show_colorbar<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether to plot a colorbar for mean_times,
default is False</p>
</dd>
<dt>min_alpha<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Minimum alpha value of the heatmap, representing the cells which
spent the least amount of time occupied, default is 0.3</p>
</dd>
<dt>show_seed<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Determines whether resulting plot shows a marker indicating the
(first) seed location. Uses indices of walk_data[:][0][0]. Default
is True, but only if ‘walk_data’ is also provided.</p>
</dd>
<dt>seed_color<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Name of matplotlib color used for the marker seed, if shown.
Default is a light blue.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ax<span class="classifier"><cite>matplotlib.axes</cite></span></dt><dd><p>A <cite>matplotlib.axes</cite> upon which the nourishment times are drawn</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.snake_plots">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">snake_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgba_start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">0.4,</span> <span class="pre">0.2,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgba_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">0.3,</span> <span class="pre">0.1,</span> <span class="pre">0]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#snake_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.snake_plots" title="Link to this definition">¶</a></dt>
<dd><p>Plot particle positions with a trailing tail.</p>
<p>Loops through existing walk_data history and creates a series of
plots of the particle locations, with recent locations shown as a
trailing tail. Default is for the tails to fade away, but they
can also change color. Currently this function can only sync up
particles by iteration number, not travel_times.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>A 2-D grid upon which the particles will be plotted. Examples of
grids that might be nice to use are
<cite>dorado.particle_track.modelParams.depth</cite>,
<cite>dorado.particle_track.modelParams.stage</cite>,
<cite>dorado.particle_track.modelParams.topography</cite>.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Output of <cite>steady_plots</cite>, <cite>unsteady_plots</cite>, <cite>time_plots</cite>, as well
as the <cite>particle_track.run_iteration</cite> method.</p>
</dd>
<dt>num_steps<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of states in the particle history to plot</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots</p>
</dd>
<dt>interval<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Interval of iterations to skip over between each plot. Also
determines how “smooth” each particle trajectory appears.
Default is to show every 4th iteration</p>
</dd>
<dt>tail_length<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Number of previous locations to show in the “tail” behind
each particle. Oldest location will be interval*tail_length
iterations before the current iteration. Default is 12</p>
</dd>
<dt>rgba_start<span class="classifier"><cite>list</cite>, optional</span></dt><dd><p>List of floats to use as the “recent” color in the particle
path, specified as [red, green, blue, alpha] in the range 0-1.
Default is a light orange</p>
</dd>
<dt>rgba_end<span class="classifier"><cite>list</cite>, optional</span></dt><dd><p>List of floats to use as the “oldest” color in the particle
path, specified as [red, green, blue, alpha] in the range 0-1.
Default slowly fades to red-ish with an alpha of zero</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>Saves a plot of the particle travel history at each step as a png</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.steady_plots">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">steady_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#steady_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.steady_plots" title="Link to this definition">¶</a></dt>
<dd><p>Automated particle movement in steady flow field.</p>
<p>Function to automate plotting of particle movement over a steady flow
fields. Particles all have same number of iterations and are allowed to
have different travel times.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>particle<span class="classifier"><a class="reference internal" href="particletrack.html#dorado.particle_track.Particles" title="dorado.particle_track.Particles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.Particles</span></code></a></span></dt><dd><p>An initialized <code class="xref py py-obj docutils literal notranslate"><span class="pre">particle_track.Particles</span></code> object with some
generated particles.</p>
</dd>
<dt>num_iter<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of iterations to move particles over</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>save_output<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether or not the output images/data are saved to disk.
Default value is True.</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>If <cite>save_output</cite> is set to True, script saves result of each iteration
to a folder with the figure for each iteration as a png and the data
with the particle locations and travel times as a json
(‘human-readable’) text file.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.time_plots">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">time_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">particle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#time_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.time_plots" title="Link to this definition">¶</a></dt>
<dd><p>Steady flow plots with particle travel times visualized.</p>
<p>Make plots with each particle’s travel time visualized.
Routine assumes a steady flow field, but could be expanded to an unsteady
case.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>particle<span class="classifier"><a class="reference internal" href="particletrack.html#dorado.particle_track.Particles" title="dorado.particle_track.Particles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dorado.particle_track.Particles</span></code></a></span></dt><dd><p>An initialized <code class="xref py py-obj docutils literal notranslate"><span class="pre">particle_track.Particles</span></code> object with some
generated particles.</p>
</dd>
<dt>num_iter<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of iterations to move particles</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>Saves plots and data for each iteration</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dorado.routines.unsteady_plots">
<span class="sig-prename descclassname"><span class="pre">dorado.routines.</span></span><span class="sig-name descname"><span class="pre">unsteady_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Np_tracer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_xloc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_yloc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#unsteady_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dorado.routines.unsteady_plots" title="Link to this definition">¶</a></dt>
<dd><p>Automated particle movement in unsteady flow.</p>
<p>Function to automate plotting of particle movement in an unsteady flow
field (time-varying). Particles all have the same travel time at the end
of each timestep and are allowed to have a different number of iterations.
Flow field variables (qx, qy, depth) are updated after each timestep.
Because this function makes very specific assumptions about your model
output files, feel free to use this as a template and change
the section that updates the flow field.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>dx<span class="classifier"><cite>float</cite></span></dt><dd><p>Length of a cell face</p>
</dd>
<dt>Np_tracer<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of particles to generate.</p>
</dd>
<dt>seed_xloc<span class="classifier"><cite>list</cite></span></dt><dd><p>List of x-coordinates over which to initially distribute the
particles.</p>
</dd>
<dt>seed_yloc<span class="classifier"><cite>list</cite></span></dt><dd><p>List of y-coordinates over which to initially distribute the
particles.</p>
</dd>
<dt>num_steps<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of model timesteps being covered</p>
</dd>
<dt>timestep<span class="classifier"><cite>float</cite></span></dt><dd><p>Model timestep duration (seconds)</p>
</dd>
<dt>output_base<span class="classifier"><cite>str</cite></span></dt><dd><p>Filepath string locating hydrodynamic output files</p>
</dd>
<dt>output_type<span class="classifier"><cite>str</cite></span></dt><dd><p>Filetype string of the output files. Currently accepts ‘csv’,
‘npy’, and ‘npz’. Assumes filenames begin with either ‘depth’,
‘stage’, ‘qx’, ‘qy’, or ‘data’, followed by timestep information
(limited built-in support, may require modification)</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>verbose<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Toggles whether or not messages print to the
console. If False, nothing is output, if True, messages are output.
Default value is True. Errors are always raised.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>Script saves result of each iteration to a folder with the figure
for each iteration as a png and the data with the particle locations
and travel times as a json text file.</p>
</div></blockquote>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">dorado</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paper/index.html">Paper</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../misc/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/acknowledgments.html">Acknowledgments</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">API Reference</a><ul>
      <li>Previous: <a href="lagrangianwalker.html" title="previous chapter">dorado.lagrangian_walker</a></li>
      <li>Next: <a href="parallelrouting.html" title="next chapter">dorado.parallel_routing</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, J. Hariharan, K. Wright, P. Passalacqua.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/apiref/routines.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>